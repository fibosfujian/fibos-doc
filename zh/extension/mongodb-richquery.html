
<!DOCTYPE HTML>
<html lang="zh" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>三行代码，让 FIBOS 支持 mongoDB 富查询 · FIBOS Document</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="FIBOS Fujian<fibosfujian@hotmail.com>">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="basic-api.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="輸入並搜尋" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://fibos.io" target="_blank" class="custom-link">FIBOS</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    基础入门
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../basic/about.html">
            
                <a href="../basic/about.html">
            
                    
                    FIBOS 是什么？
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../basic/install.html">
            
                <a href="../basic/install.html">
            
                    
                    搭建一个 FIBOS 开发环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../basic/fibosjs.html">
            
                <a href="../basic/fibosjs.html">
            
                    
                    使用 fibos.js 与 FIBOS 交互
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../basic/deploy-contract.md">
            
                <span>
            
                    
                    发布一个简单的 JS 合约
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../basic/test.html">
            
                <a href="../basic/test.html">
            
                    
                    开始体验 FIBOS 超棒的测试框架
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    FIBOS 基础操作
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../use/mainnet.html">
            
                <a href="../use/mainnet.html">
            
                    
                    FIBOS 主网信息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../use/eos2fibos.html">
            
                <a href="../use/eos2fibos.html">
            
                    
                    从 EOS 主网跨链转账到 FIBOS 主网
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../use/eos2fo.html">
            
                <a href="../use/eos2fo.html">
            
                    
                    在 FIBOS 中 EOS 通证与 FO 通证相互兑换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../use/fibos2eos.html">
            
                <a href="../use/fibos2eos.html">
            
                    
                    从 FIBOS 主网跨链转账到 EOS 主网
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../use/bp-list.html">
            
                <a href="../use/bp-list.html">
            
                    
                    FIBOS RPC 以及 P2P 列表(持续更新)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../use/bp.html">
            
                <a href="../use/bp.html">
            
                    
                    在 FIBOS 主网中申请注册 BP 节点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../use/create-account.html">
            
                <a href="../use/create-account.html">
            
                    
                    如何帮助别人在 FIBOS 中创建账号
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../use/create-token.html">
            
                <a href="../use/create-token.html">
            
                    
                    如何在 FIBOS 中发行和销毁通证
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    FIBOS 测试网络
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../testnet/about.html">
            
                <a href="../testnet/about.html">
            
                    
                    FIBOS TestNet 是什么？
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../testnet/join.html">
            
                <a href="../testnet/join.html">
            
                    
                    如何加入到 TestNet 网络
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    深入理解FIBOS
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../advance/fibos.md">
            
                <span>
            
                    
                    由浅入深理解 FIBOS 权限系统
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    FIBOS 扩展应用
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.6.1" data-path="mongodb-richquery.html">
            
                <a href="mongodb-richquery.html">
            
                    
                    三行代码，让 FIBOS 支持 mongoDB 富查询
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="basic-api.html">
            
                <a href="basic-api.html">
            
                    
                    FIBOS.js API 基础篇
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本書使用 GitBook 釋出
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >三行代码，让 FIBOS 支持 mongoDB 富查询</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x4E09;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x8BA9;-fibos-&#x652F;&#x6301;-mongodb-&#x5BCC;&#x67E5;&#x8BE2;">&#x4E09;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x8BA9; FIBOS &#x652F;&#x6301; mongoDB &#x5BCC;&#x67E5;&#x8BE2;</h1>
<p>&#x5728;&#x4E1A;&#x52A1;&#x4E2D;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x4F1A;&#x6709;&#x67E5;&#x8BE2;&#x5386;&#x53F2;&#x6570;&#x636E;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;&#x67D0;&#x4E2A;&#x8D26;&#x6237;&#x7684;&#x5386;&#x53F2;&#x8F6C;&#x8D26;&#x8BB0;&#x5F55;&#xFF0C;&#x4F46;&#x662F;&#x8003;&#x8651;&#x5230;&#x6027;&#x80FD;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5728; EOS &#x4E2D;&#x4F7F;&#x7528;&#x81EA;&#x8EAB;&#x67E5;&#x8BE2;&#x5386;&#x53F2;&#x6570;&#x636E;&#x5E76;&#xF967;&#x662F;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x53E6;&#x5916; EOS &#x7684; history API &#x6A21;&#x5757;&#x90E8;&#x5206;&#x529F;&#x80FD;&#x8FED;&#x4EE3;&#x5FEB;&#xFF0C;&#x751A;&#x81F3;&#x5373;&#x5C06;&#x5E9F;&#x5F03;&#x3002;</p>
<p>EOS &#x672C;&#x8EAB;&#x63D0;&#x4F9B;&#x4E86;mongoDB &#x7684;&#x63D2;&#x4EF6;&#xFF08;eosio::mongo_db_plugin&#xFF09;&#xFF0C;FIBOS &#x4E5F;&#x6CBF;&#x7528;&#x4E86;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x3002;&#x8BE5;&#x6A21;&#x5757;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x662F;&#x5C06;&#x533A;&#x5757;&#x7684;&#x6570;&#x636E;&#x540C;&#x6B65;&#x81F3; mongoDB&#x3002;&#x8FD9;&#x4F7F;&#x5F97;&#x6B64;&#x65B9;&#x5F0F;&#x8BA9; mongoDB &#x6210;&#x4E3A;&#x4E86;&#x4E2D;&#x5FC3;&#x5316;&#x6570;&#x636E;&#x5B58;&#x50A8;&#xFF0C;&#x7545;&#x60F3;&#x4E00;&#x4E0B;&#x4E00;&#x4E2A; FIBOS &#x7684;&#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x5728;&#x8BBE;&#x8BA1;&#x4E0A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BA9; FIBOS &#x8282;&#x70B9;&#x670D;&#x52A1;&#x548C;&#x57FA;&#x4E8E; mongoDB &#x7684;&#x67E5;&#x8BE2;&#x4E1A;&#x52A1;&#x5206;&#x79BB;&#xFF0C;&#x8BA9;&#x6027;&#x80FD;&#x5927;&#x5927;&#x7684;&#x63D0;&#x9AD8;&#x3002;</p>
<p>&#x9605;&#x8BFB;&#x5B8C;&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5B66;&#x4F1A;&#x5982;&#x4F55;&#x5229;&#x7528; FIBOS &#x5185;&#x7F6E;&#x7684; mongo_db &#x6A21;&#x5757;&#x5C06;&#x6570;&#x636E;&#x540C;&#x6B65;&#x81F3; mongoDB&#xFF0C;&#x5E76;&#x4F7F;&#x7528; mongoDB &#x67E5;&#x8BE2; FIBOS &#x7684;&#x533A;&#x5757;&#x6570;&#x636E;&#x3002;</p>
<p>&#x8D76;&#x7D27;&#x5B89;&#x88C5;&#x65B0;&#x7248; FIBOS &#x8BD5;&#x8BD5;&#x5427;&#xFF01;<a href="../basic/install.html">&#x5B89;&#x88C5;&#x8FD0;&#x884C;&#x73AF;&#x5883;</a></p>
<ul>
<li><p>&#x672C;&#x6587;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#xFF1A;</p>
<p>&#x7CFB;&#x7EDF;&#xFF1A;macOS</p>
</li>
<li><p>&#x672C;&#x7AE0;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x6587;&#x4EF6;&#x5217;&#x8868;&#xFF1A;</p>
<pre><code>  hello_mongoDB/
  &#x251C;&#x2500;&#x2500; local
  &#x2502;   &#x251C;&#x2500;&#x2500; client.js
  &#x2502;   &#x2514;&#x2500;&#x2500; node.js
  &#x2514;&#x2500;&#x2500; testnet
      &#x251C;&#x2500;&#x2500; client.js
      &#x2514;&#x2500;&#x2500; node.js
</code></pre></li>
<li><p>&#x4F9D;&#x8D56;&#xFF1A;fibos.js &#x5982;&#x4F55;&#x5B89;&#x88C5;&#x8BF7;&#x53C2;&#x8003;<a href="../basic/fibosjs.html">&#x4F7F;&#x7528; fibos.js &#x4E0E; FIBOS &#x4EA4;&#x4E92;</a></p>
</li>
<li><p>&#x672C;&#x7AE0;&#x8282;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5730;&#x5740;&#xFF1A;<a href="https://github.com/FIBOSIO/samples" target="_blank">https://github.com/FIBOSIO/samples</a></p>
</li>
</ul>
<h2 id="&#x672C;&#x5730;&#x5FEB;&#x901F;&#x4F53;&#x9A8C;">&#x672C;&#x5730;&#x5FEB;&#x901F;&#x4F53;&#x9A8C;</h2>
<p>&#x6211;&#x4EEC;&#x5728;&#x672C;&#x5730;&#x542F;&#x52A8;&#x4E00;&#x4E2A; FIBOS &#x8282;&#x70B9;&#x670D;&#x52A1;&#xFF0C;&#x521B;&#x5EFA;&#x8D26;&#x6237;&#x5E76;&#x5728; mongoDB &#x4E2D;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#x3002;</p>
<h4 id="&#x542F;&#x52A8;-mongod-&#x670D;&#x52A1;">&#x542F;&#x52A8; mongod &#x670D;&#x52A1;</h4>
<p>&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x672A;&#x5B89;&#x88C5; mongoDB&#xFF0C;&#x8BF7;&#x53C2;&#x8003; <a href="https://docs.mongoDB.com/manual/administration/install-community/" target="_blank">Install mongoDB Community Edition</a>&#x3002;</p>
<p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x542F;&#x52A8; mongod &#x670D;&#x52A1;&#xFF0C;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>fibos$ mongod
</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x8F93;&#x51FA;&#xFF0C;&#x8BF4;&#x660E; mongod &#x670D;&#x52A1;&#x6210;&#x529F;&#x542F;&#x52A8;&#xFF1A;</p>
<pre><code>2018-08-08T09:52:09.459+0800 I CONTROL  [main] Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols &apos;none&apos;
2018-08-08T09:52:09.534+0800 I CONTROL  [initandlisten] mongoDB starting : pid=8061 port=27017 dbpath=/data/db 64-bit host=Velen
2018-08-08T09:52:09.534+0800 I CONTROL  [initandlisten] db version v4.0.1
2018-08-08T09:52:09.534+0800 I CONTROL  [initandlisten] git version: 54f1582fc6eb01de4d4c42f26fc133e623f065fb
2018-08-08T09:52:09.534+0800 I CONTROL  [initandlisten] allocator: system
2018-08-08T09:52:09.534+0800 I CONTROL  [initandlisten] modules: none
2018-08-08T09:52:09.534+0800 I CONTROL  [initandlisten] build environment:
2018-08-08T09:52:09.534+0800 I CONTROL  [initandlisten]     distarch: x86_64
2018-08-08T09:52:09.534+0800 I CONTROL  [initandlisten]     target_arch: x86_64
</code></pre><h4 id="&#x542F;&#x52A8;-fibos-&#x73AF;&#x5883;">&#x542F;&#x52A8; FIBOS &#x73AF;&#x5883;</h4>
<p>&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x672A;&#x5B89;&#x88C5; FIBOS&#xFF0C;&#x8BF7;&#x53C2;&#x8003; <a href="../basic/install.html">&#x5B89;&#x88C5;&#x8FD0;&#x884C;&#x73AF;&#x5883;</a>&#x3002;</p>
<p>&#x60F3;&#x8981;&#x5C06;&#x6570;&#x636E;&#x540C;&#x6B65;&#x81F3; mongoDB &#xFF0C;&#x4EC5;&#x9700;&#x5728;&#x5165;&#x95E8;&#x6559;&#x7A0B;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x52A0;&#x5165;&#x4E00;&#x6BB5; <code>fibos.load(&quot;mongo_db&quot;)</code> &#xFF0C;&#x5C06; mongo_db &#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x8F7D;&#x5165; FIBOS&#x3002;&#x53EA;&#x9700;&#x8981;&#x4E09;&#x884C;&#x4EE3;&#x7801;&#xFF0C;FIBOS &#x4FBF;&#x4F1A;&#x5C06;&#x533A;&#x5757;&#x6570;&#x636E;&#x81EA;&#x52A8;&#x540C;&#x6B65;&#x81F3; mongoDB&#xFF0C;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;</p>
<p>&#x7AEF;&#x53E3;&#x53F7;&#x548C;&#x6570;&#x636E;&#x5E93;&#x540D;&#x79F0;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x66F4;&#x6539;&#xFF0C;&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#x7AEF;&#x53E3;&#x4E3A; 27017&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x540D;&#x4E3A; eosmain&#x3002; &#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x4FDD;&#x5B58;&#x81F3; <code>./local/node.js</code>&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> fibos = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fibos&apos;</span>);

fibos.load(<span class="hljs-string">&quot;http&quot;</span>);
fibos.load(<span class="hljs-string">&quot;chain&quot;</span>, {
    <span class="hljs-string">&quot;contracts-console&quot;</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">&quot;delete-all-blocks&quot;</span>: <span class="hljs-literal">true</span>,
});
fibos.load(<span class="hljs-string">&quot;net&quot;</span>);
fibos.load(<span class="hljs-string">&quot;chain_api&quot;</span>);
fibos.load(<span class="hljs-string">&quot;history_api&quot;</span>);
fibos.load(<span class="hljs-string">&quot;producer&quot;</span>, {
    <span class="hljs-string">&apos;producer-name&apos;</span>: <span class="hljs-string">&apos;eosio&apos;</span>,
    <span class="hljs-string">&apos;enable-stale-production&apos;</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">&quot;max-transaction-time&quot;</span>: <span class="hljs-number">3000</span>
});
fibos.load(<span class="hljs-string">&quot;mongo_db&quot;</span>, {
    <span class="hljs-string">&quot;mongodb-uri&quot;</span>: <span class="hljs-string">&quot;mongodb://localhost:27017/eosmain&quot;</span>
});

fibos.start();
</code></pre>
<p>&#x542F;&#x52A8; FIBOS &#x73AF;&#x5883;&#xFF1A;</p>
<pre><code>fibos$ fibos ./local/node.js
</code></pre><p>&#x5728;&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5728; mongd &#x7684;&#x65E5;&#x5FD7;&#x4E2D;&#x4F1A;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x8F93;&#x51FA;&#xFF1A;</p>
<pre><code>2018-08-08T11:33:42.867+0800 I NETWORK  [listener] connection accepted from 127.0.0.1:54259 #2 (2 connections now open)
2018-08-08T11:33:42.868+0800 I NETWORK  [conn2] received client metadata from 127.0.0.1:54259 conn2: { driver: { name: &quot;mongoc / mongocxx&quot;, version: &quot;1.10.2 / 3.3.1-pre&quot; }, os: { type: &quot;Darwin&quot;, name: &quot;macOS&quot;, version: &quot;18.0.0&quot;, architecture: &quot;x86_64&quot; }, platform: &quot;cfg=0x00d6a265 posix=200112 stdc=201112 CC=clang 9.1.0 (clang-902.0.39.2) CFLAGS=&quot;&quot; LDFLAGS=&quot;&quot;&quot; }
2018-08-08T11:33:42.873+0800 I STORAGE  [conn2] createCollection: eosmain.accounts with generated UUID: 0e553ab1-4c07-436a-abf7-62c6864779ed

...

2018-08-08T11:33:43.925+0800 I COMMAND  [conn2] command eosmain.$cmd command: createIndexes { createIndexes: &quot;actions&quot;, indexes: [ { name: &quot;trx_id_1&quot;, key: { trx_id: 1 } } ], $db: &quot;eosmain&quot;, lsid: { id: UUID(&quot;1ee67ce9-d0db-4ad1-9737-c4fba7f850ca&quot;) } } numYields:0 reslen:114 locks:{ Global: { acquireCount: { r: 1, w: 1 } }, Database: { acquireCount: { W: 1 } }, Collection: { acquireCount: { w: 1 } } } protocol:op_msg 119ms
2018-08-08T11:33:44.019+0800 I STORAGE  [conn2] createCollection: eosmain.transaction_traces with generated UUID: a637e777-aed4-45d2-9bf6-b149bc4e702b
</code></pre><p>&#x901A;&#x8FC7;&#x65E5;&#x5FD7;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5230; FIBOS &#x4E3A;&#x6211;&#x4EEC;&#x505A;&#x4E86;&#x5982;&#x4E0B;&#x4E8B;&#x60C5;&#xFF1A;</p>
<ol>
<li>&#x521B;&#x5EFA;&#x96C6;&#x5408;&#xFF1A;accounts&#xFF0C;actions&#xFF0C;block_states&#xFF0C;blocks&#xFF0C;transaction_traces&#xFF0C;transactions</li>
<li>&#x7ED9;&#x5404;&#x96C6;&#x5408;&#x521B;&#x5EFA;&#x5FC5;&#x8981;&#x7684;&#x7D22;&#x5F15;</li>
</ol>
<p>&#x6211;&#x4EEC;&#x8FDB;&#x5165; mongoDB &#x7684;&#x5BA2;&#x6237;&#x7AEF; mongo &#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#xFF0C;&#x4F1A;&#x770B;&#x5230; eosmain &#x6570;&#x636E;&#x5E93;&#x88AB;&#x6210;&#x529F;&#x521B;&#x5EFA;&#xFF1A;</p>
<pre><code>&gt; show dbs
admin          0.000GB
config         0.000GB
eosmain        0.002GB
local          0.000GB
</code></pre><p>&#x8FDB;&#x5165; eosmain &#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0; FIBOS &#x5728; mongoDB &#x4E2D;&#x521B;&#x5EFA;&#x4E86; 5 &#x4E2A;&#x96C6;&#x5408;&#xFF1A;</p>
<pre><code>&gt; use eosmain
switched to db eosmain
&gt; show tables
accounts
actions
block_states
blocks
transaction_traces
transactions
</code></pre><p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x67E5;&#x8BE2; accounts &#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF1A;</p>
<pre><code>&gt; db.accounts.find()
{ &quot;_id&quot; : ObjectId(&quot;5b6a6496bc9b452f1e4750d2&quot;), &quot;name&quot; : &quot;eosio&quot;, &quot;createdAt&quot; : ISODate(&quot;2018-08-08T03:33:42.869Z&quot;) }
</code></pre><p>&#x4F1A;&#x53D1;&#x73B0;&#x5DF2;&#x6709;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x8D26;&#x6237; eosio &#x7684;&#x6570;&#x636E;&#x88AB;&#x540C;&#x6B65;&#x5230;&#x4E86; mongoDB&#x3002;</p>
<h4 id="&#x65B0;&#x5EFA;&#x8D26;&#x6237;&#xFF0C;&#x5728;-mongodb-&#x4E2D;&#x67E5;&#x8BE2;&#x6570;&#x636E;">&#x65B0;&#x5EFA;&#x8D26;&#x6237;&#xFF0C;&#x5728; mongoDB &#x4E2D;&#x67E5;&#x8BE2;&#x6570;&#x636E;</h4>
<p>&#x63A5;&#x7740;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x811A;&#x672C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x8D26;&#x6237;&#x5E76;&#x5728; mongoDB &#x67E5;&#x8BE2;&#x3002;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x4FDD;&#x5B58;&#x81F3; <code>./local/client.js</code></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> FIBOS = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fibos.js&apos;</span>);
<span class="hljs-keyword">var</span> config = {
    <span class="hljs-string">&quot;chainId&quot;</span>: <span class="hljs-string">&quot;cf057bbfb72640471fd910bcb67639c22df9f92470936cddc1ade0e2f2e7dc4f&quot;</span>,
    <span class="hljs-string">&quot;producer-name&quot;</span>: <span class="hljs-string">&quot;eosio&quot;</span>,
    <span class="hljs-string">&quot;public-key&quot;</span>: <span class="hljs-string">&quot;FO6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV&quot;</span>,
    <span class="hljs-string">&quot;private-key&quot;</span>: <span class="hljs-string">&quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot;</span>,
    <span class="hljs-string">&quot;httpEndpoint&quot;</span>: <span class="hljs-string">&quot;http://127.0.0.1:8888&quot;</span>,
};

<span class="hljs-keyword">var</span> fibos = FIBOS({
    chainId: config[<span class="hljs-string">&quot;chainId&quot;</span>],
    keyProvider: config[<span class="hljs-string">&quot;private-key&quot;</span>],
    httpEndpoint: config[<span class="hljs-string">&quot;httpEndpoint&quot;</span>],
    logger: {
        log: <span class="hljs-literal">null</span>,
        error: <span class="hljs-literal">null</span>
    }
});

<span class="hljs-keyword">let</span> result = fibos.newaccountSync({
    creator: <span class="hljs-string">&apos;eosio&apos;</span>,
    name: <span class="hljs-string">&quot;hellomongodb&quot;</span>,
    owner: config[<span class="hljs-string">&quot;public-key&quot;</span>],
    active: config[<span class="hljs-string">&quot;public-key&quot;</span>]
});
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;result: &apos;</span>, result);
</code></pre>
<p>&#x6267;&#x884C;&#x811A;&#x672C;:</p>
<pre><code>fibos$ fibos ./local/client.js
</code></pre><p>&#x811A;&#x672C;&#x7ED3;&#x679C;&#xFF08;&#x7247;&#x6BB5;&#xFF09;&#xFF1A;</p>
<pre><code>result:  {
  &quot;broadcast&quot;: true,
  &quot;transaction&quot;: {
    &quot;compression&quot;: &quot;none&quot;,
    &quot;transaction&quot;: {
      &quot;expiration&quot;: &quot;2018-08-08T03:49:44&quot;,
      &quot;ref_block_num&quot;: 10,
      &quot;ref_block_prefix&quot;: 241484686,
      &quot;net_usage_words&quot;: 0,
      &quot;max_cpu_usage_ms&quot;: 0,
      &quot;delay_sec&quot;: 0,
      &quot;context_free_actions&quot;: [],
      &quot;actions&quot;: [
        {
          &quot;account&quot;: &quot;eosio&quot;,
          &quot;name&quot;: &quot;newaccount&quot;,
          &quot;authorization&quot;: [
            {
              &quot;actor&quot;: &quot;eosio&quot;,
              &quot;permission&quot;: &quot;active&quot;
            }
          ],
          &quot;data&quot;: &quot;0000000000ea3055701265934a1aa36a01000000010002c0ded2bc1f1305fb0faac5e6c03ee3a1924234985427b6167ca569d13df435cf0100000001000000010002c0ded2bc1f1305fb0faac5e6c03ee3a1924234985427b6167ca569d13df435cf01000000&quot;
        }
</code></pre><p>&#x7ECF;&#x8FC7;&#x77ED;&#x6682;&#x7684;&#x540C;&#x6B65;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5728; mongo &#x4E2D;&#x67E5;&#x8BE2;&#x8D26;&#x6237;&#x6570;&#x636E;&#xFF1A;</p>
<pre><code>&gt; db.accounts.find()
{ &quot;_id&quot; : ObjectId(&quot;5b6a6496bc9b452f1e4750d2&quot;), &quot;name&quot; : &quot;eosio&quot;, &quot;createdAt&quot; : ISODate(&quot;2018-08-08T03:33:42.869Z&quot;) }
{ &quot;_id&quot; : ObjectId(&quot;5b6a681cbc9b453001230003&quot;), &quot;name&quot; : &quot;hellomongodb&quot;, &quot;createdAt&quot; : ISODate(&quot;2018-08-08T03:48:44.863Z&quot;) }
</code></pre><p>&#x4F1A;&#x53D1;&#x73B0;&#x8D26;&#x6237;&#x6570;&#x636E;&#x591A;&#x4E86;&#x4E00;&#x6761;&#x521A;&#x624D;&#x521B;&#x5EFA;&#x7684; hellomongodb &#x6570;&#x636E;&#x3002;&#x8FDB;&#x884C;&#x5230;&#x8FD9;&#x6B65;&#xFF0C;&#x606D;&#x559C;&#x4F60;&#xFF0C;&#x4F60;&#x5DF2;&#x7ECF;&#x5B66;&#x4F1A;&#x4E86;&#x5982;&#x4F55;&#x5C06; FIBOS &#x7F51;&#x7EDC;&#x4E2D;&#x7684;&#x533A;&#x5757;&#x6570;&#x636E;&#x540C;&#x6B65;&#x81F3; mongoDB &#x5E76;&#x4F7F;&#x7528; mongo &#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#xFF01;</p>
<p>&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8282;&#x70B9;&#x540C;&#x6B65; TestNet &#x7F51;&#x7EDC;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x6570;&#x636E;&#x540C;&#x6B65;&#x81F3; mongoDB&#xFF0C;&#x5E76;&#x5229;&#x7528; mongoDB &#x7684;&#x8BED;&#x6CD5;&#x67E5;&#x8BE2;&#x6211;&#x4EEC;&#x53D1;&#x8D77;&#x7684;&#x4EA4;&#x6613;&#x3002;</p>
<h2 id="&#x8FDB;&#x9636;&#xFF0C;&#x5229;&#x7528;-mongodb-&#x67E5;&#x8BE2;-testnet-&#x6570;&#x636E;">&#x8FDB;&#x9636;&#xFF0C;&#x5229;&#x7528; mongoDB &#x67E5;&#x8BE2; TestNet &#x6570;&#x636E;</h2>
<p>&#x5982;&#x679C;&#x4F60;&#x5BF9;&#x52A0;&#x5165; TestNet &#x7F51;&#x7EDC;&#x7684;&#x6B65;&#x9AA4;&#x8FD8;&#x4E0D;&#x719F;&#x6089;&#xFF0C;&#x8BF7;&#x53C2;&#x8003; <a href="../development/abouttestnet.md">&#x5982;&#x4F55;&#x52A0;&#x5165;&#x5230; TestNet &#x7F51;&#x7EDC;</a>&#x3002;</p>
<h4 id="&#x542F;&#x52A8;-fibos-&#x73AF;&#x5883;&#xFF0C;&#x52A0;&#x5165;-testnet-&#x7F51;&#x7EDC;">&#x542F;&#x52A8; FIBOS &#x73AF;&#x5883;&#xFF0C;&#x52A0;&#x5165; TestNet &#x7F51;&#x7EDC;</h4>
<p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; ctrl + c &#x5173;&#x95ED;&#x4E4B;&#x524D;&#x7684;&#x672C;&#x5730;&#x79C1;&#x6709;&#x94FE;&#x8282;&#x70B9;&#xFF0C;&#x5E76;&#x6267;&#x884C; <code>db.dropDatabase()</code> &#x5C06;&#x4E4B;&#x524D;&#x7684; <code>eosmanin</code> &#x6570;&#x636E;&#x5E93;&#x5220;&#x9664;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8282;&#x70B9;&#x52A0;&#x5165; TestNet &#x7F51;&#x7EDC;&#x3002;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x4FDD;&#x5B58;&#x81F3; <code>./testnet/node.js</code>&#xFF1A;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> fibos = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fibos&apos;</span>);

fibos.config_dir = <span class="hljs-string">&quot;sync_data_Dir&quot;</span>;
fibos.data_dir = <span class="hljs-string">&quot;sync_data_Dir&quot;</span>;

fibos.load(<span class="hljs-string">&quot;http&quot;</span>, {
    <span class="hljs-string">&quot;http-server-address&quot;</span>: <span class="hljs-string">&quot;0.0.0.0:8888&quot;</span>
});

fibos.load(<span class="hljs-string">&quot;net&quot;</span>, {
    <span class="hljs-string">&quot;p2p-listen-endpoint&quot;</span>: <span class="hljs-string">&quot;0.0.0.0:9876&quot;</span>,
    <span class="hljs-string">&quot;p2p-peer-address&quot;</span>: <span class="hljs-string">&quot;103.80.170.107:9876&quot;</span>
});

fibos.load(<span class="hljs-string">&quot;producer&quot;</span>);
fibos.load(<span class="hljs-string">&quot;chain&quot;</span>, {
    <span class="hljs-string">&quot;delete-all-blocks&quot;</span>: <span class="hljs-literal">true</span>
});
fibos.load(<span class="hljs-string">&quot;chain_api&quot;</span>);
fibos.load(<span class="hljs-string">&quot;wallet&quot;</span>);
fibos.load(<span class="hljs-string">&quot;wallet_api&quot;</span>);
fibos.load(<span class="hljs-string">&quot;mongo_db&quot;</span>, {
    <span class="hljs-string">&quot;mongodb-uri&quot;</span>: <span class="hljs-string">&quot;mongodb://localhost:27017/eosmain&quot;</span>
})

fibos.start();
</code></pre>
<p>&#x6267;&#x884C;&#x811A;&#x672C;&#xFF1A;</p>
<pre><code>fibos$ fibos ./testnet/node.js
</code></pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF08;&#x7247;&#x6BB5;&#xFF09;&#xFF1A;</p>
<pre><code>2018-08-08T04:46:38.052 thread-0   http_plugin.cpp:344           plugin_initialize    ] configured http to listen on 0.0.0.0:8888
2018-08-08T04:46:38.052 thread-0   chain_plugin.cpp:271          plugin_initialize    ] initializing chain plugin
2018-08-08T04:46:38.053 thread-0   chain_plugin.cpp:408          plugin_initialize    ] Deleting state database and blocks
2018-08-08T04:46:38.223 thread-0   chain_plugin.cpp:508          plugin_initialize    ] Starting up fresh blockchain with default genesis state.
</code></pre><p>&#x6211;&#x4EEC;&#x8FDB;&#x5165; mongo &#x4E2D;&#x67E5;&#x8BE2;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0; TestNet &#x4E2D;&#x7684;&#x8D26;&#x6237;&#x6570;&#x636E;&#x5DF2;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x540C;&#x6B65;&#x5230;&#x4E86; mongoDB &#x4E2D;&#xFF1A;</p>
<pre><code>&gt; use eosmain
&gt; db.accounts.find()
</code></pre><h4 id="&#x65B0;&#x5EFA;&#x8D26;&#x6237;&#xFF0C;&#x5728;-mongodb-&#x4E2D;&#x67E5;&#x8BE2;&#x6570;&#x636E;">&#x65B0;&#x5EFA;&#x8D26;&#x6237;&#xFF0C;&#x5728; mongoDB &#x4E2D;&#x67E5;&#x8BE2;&#x6570;&#x636E;</h4>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728; <a href="http://103.80.170.107:8080/" target="_blank">FIBOS TestNet &#x8D26;&#x6237;&#x6CE8;&#x518C;</a> &#x8FDB;&#x884C; TestNet &#x65B0;&#x8D26;&#x6237;&#x7684;&#x6CE8;&#x518C;&#x3002;&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x65B0;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; hellomongodb &#x7684;&#x8D26;&#x6237;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x65B0;&#x5EFA;&#x811A;&#x672C;&#x7528;&#x6765;&#x67E5;&#x8BE2;&#x521A;&#x521A;&#x6CE8;&#x518C;&#x7684;&#x8D26;&#x6237;&#x4FE1;&#x606F;&#xFF0C;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x4FDD;&#x5B58;&#x81F3; <code>./testnet/client.js</code>&#xFF08;&#x6CE8;&#x610F;&#x66FF;&#x6362;&#x4F60;&#x81EA;&#x5DF1;&#x751F;&#x6210;&#x7684;&#x79C1;&#x94A5;&#x4EE5;&#x53CA;&#x8D26;&#x6237;&#x540D;&#xFF09;&#xFF1A;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> FIBOS = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fibos.js&apos;</span>);

<span class="hljs-keyword">var</span> config = {
    chainId: <span class="hljs-string">&apos;cf057bbfb72640471fd910bcb67639c22df9f92470936cddc1ade0e2f2e7dc4f&apos;</span>, <span class="hljs-comment">// 32 byte (64 char) hex string</span>
    keyProvider: <span class="hljs-string">&apos;// &#x586B;&#x5165;&#x6CE8;&#x518C;&#x65F6;&#x751F;&#x6210;&#x7684;&#x79C1;&#x94A5;&apos;</span>, <span class="hljs-comment">// WIF string or array of keys..</span>
    httpEndpoint: <span class="hljs-string">&apos;http://103.80.170.107:8888&apos;</span>,
    logger: {
        log: <span class="hljs-literal">null</span>,
        error: <span class="hljs-literal">null</span>
    }
}

<span class="hljs-keyword">var</span> fibos = FIBOS(config);
<span class="hljs-keyword">var</span> balance = fibos.getTableRowsSync(<span class="hljs-literal">true</span>, <span class="hljs-string">&quot;eosio.token&quot;</span>, <span class="hljs-string">&quot;hellomongoDB&quot;</span>, <span class="hljs-string">&quot;accounts&quot;</span>);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;balance&apos;</span>, balance);
</code></pre>
<p>&#x6267;&#x884C;&#x811A;&#x672C;&#xFF1A;</p>
<pre><code>fibos$ fibos client.js
</code></pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF08;&#x7247;&#x6BB5;&#xFF09;&#xFF1A;</p>
<pre><code>account:  {
  &quot;account_name&quot;: &quot;hellomongodb&quot;,
  &quot;head_block_num&quot;: 14022,
  &quot;head_block_time&quot;: &quot;2018-08-08T04:58:48.000&quot;,
  &quot;privileged&quot;: false,
  &quot;last_code_update&quot;: &quot;1970-01-01T00:00:00.000&quot;,
  &quot;created&quot;: &quot;2018-08-08T04:51:23.500&quot;,
  &quot;core_liquid_balance&quot;: &quot;50.0000 FO&quot;,
  &quot;ram_quota&quot;: 4073,
  &quot;net_weight&quot;: 500000,
  &quot;cpu_weight&quot;: 500000,
  &quot;net_limit&quot;: {
    &quot;used&quot;: 0,
    &quot;available&quot;: 22649235,
    &quot;max&quot;: 22649235
  }
</code></pre><p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x521A;&#x521A;&#x6CE8;&#x518C;&#x7684;&#x8D26;&#x6237; hellomongodb &#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4EE5;&#x53CA;&#x7CFB;&#x7EDF;&#x8D60;&#x9001;&#x7684; 50 FO&#x3002;&#x7ECF;&#x8FC7;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x7684;&#x540C;&#x6B65;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728; mongo &#x4E2D;&#x67E5;&#x8BE2;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x8D26;&#x6237;&#x6570;&#x636E;&#xFF1A;</p>
<pre><code>&gt; db.accounts.find({&quot;name&quot;:&quot;hellomongodb&quot;})
{ &quot;_id&quot; : ObjectId(&quot;5b6a7863bc9b4532eb0add48&quot;), &quot;name&quot; : &quot;hellomongodb&quot;, &quot;createdAt&quot; : ISODate(&quot;2018-08-08T04:58:11.306Z&quot;) }
</code></pre><h4 id="&#x53D1;&#x8D77;&#x4EA4;&#x6613;&#xFF0C;&#x5229;&#x7528;-mongodb-&#x67E5;&#x8BE2;&#x4EA4;&#x6613;&#x6570;&#x636E;">&#x53D1;&#x8D77;&#x4EA4;&#x6613;&#xFF0C;&#x5229;&#x7528; mongoDB &#x67E5;&#x8BE2;&#x4EA4;&#x6613;&#x6570;&#x636E;</h4>
<p>mongoDB &#x7684;&#x67E5;&#x8BE2;&#x65B9;&#x6CD5;&#x5177;&#x4F53;&#x8BED;&#x6CD5;&#x4E3A;&#xFF1A;</p>
<pre><code>&gt; db.collection.find(query, projection)
</code></pre><ul>
<li><strong>query</strong> &#xFF1A;&#x53EF;&#x9009;&#xFF0C;&#x4F7F;&#x7528;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x7B26;&#x6307;&#x5B9A;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;</li>
<li><strong>projection</strong> &#xFF1A;&#x53EF;&#x9009;&#xFF0C;&#x4F7F;&#x7528;&#x6295;&#x5F71;&#x64CD;&#x4F5C;&#x7B26;&#x6307;&#x5B9A;&#x8FD4;&#x56DE;&#x7684;&#x952E;&#x3002;&#x67E5;&#x8BE2;&#x65F6;&#x8FD4;&#x56DE;&#x6587;&#x6863;&#x4E2D;&#x6240;&#x6709;&#x952E;&#x503C;&#xFF0C; &#x53EA;&#x9700;&#x7701;&#x7565;&#x8BE5;&#x53C2;&#x6570;&#x5373;&#x53EF;&#xFF08;&#x9ED8;&#x8BA4;&#x7701;&#x7565;&#xFF09;&#x3002;</li>
</ul>
<p>&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x4EE5;&#x6613;&#x8BFB;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; pretty() &#x65B9;&#x6CD5;&#xFF0C;&#x8BED;&#x6CD5;&#x683C;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>&gt; db.col.find().pretty()
</code></pre><p>pretty() &#x65B9;&#x6CD5;&#x4EE5;&#x683C;&#x5F0F;&#x5316;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x663E;&#x793A;&#x6240;&#x6709;&#x6587;&#x6863;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8FDB;&#x884C;&#x4E00;&#x7B14;&#x8F6C;&#x8D26;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7; trx_id &#x4F5C;&#x4E3A;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#x6765;&#x67E5;&#x8BE2;&#x8FD9;&#x4E2A;&#x4EA4;&#x6613;&#x7684;&#x8BB0;&#x5F55;&#x3002;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x521A;&#x521A;&#x521B;&#x5EFA;&#x7684;&#x8D26;&#x6237;&#x8FDB;&#x884C;&#x4E00;&#x7B14;&#x8F6C;&#x8D26;&#x4EA4;&#x6613;&#x3002;&#x5BF9; <code>./testnet/client.js</code> &#x4EE3;&#x7801;&#x4F5C;&#x5982;&#x4E0B;&#x4FEE;&#x6539;&#xFF1A;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> FIBOS = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fibos.js&apos;</span>);

<span class="hljs-keyword">var</span> config = {
    chainId: <span class="hljs-string">&apos;cf057bbfb72640471fd910bcb67639c22df9f92470936cddc1ade0e2f2e7dc4f&apos;</span>, <span class="hljs-comment">// 32 byte (64 char) hex string</span>
    keyProvider: <span class="hljs-string">&apos;5KH6znunJQBdexEVcx7FkeJH7Npswi9hEpJx2fXqAvQA77SPE6V&apos;</span>, <span class="hljs-comment">// WIF string or array of keys..</span>
    httpEndpoint: <span class="hljs-string">&apos;http://103.80.170.107:8888&apos;</span>,
    logger: {
        log: <span class="hljs-literal">null</span>,
        error: <span class="hljs-literal">null</span>
    }
}

<span class="hljs-keyword">var</span> fibos = FIBOS(config);
<span class="hljs-keyword">var</span> ctx = fibos.contractSync(<span class="hljs-string">&quot;eosio.token&quot;</span>);
<span class="hljs-keyword">var</span> result = ctx.transferSync(<span class="hljs-string">&quot;hellomongodb&quot;</span>, <span class="hljs-string">&quot;eosio&quot;</span>, <span class="hljs-string">&apos;10.0000 FO&apos;</span>, <span class="hljs-string">&apos;transfer&apos;</span>);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;result&apos;</span>, result);
</code></pre>
<p>&#x6267;&#x884C;&#x811A;&#x672C;&#xFF1A;</p>
<pre><code>fibos$ fibos ./testnet/client.js
</code></pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF08;&#x7247;&#x6BB5;&#xFF09;&#xFF0C;&#x5305;&#x542B;&#x4EA4;&#x6613;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x7B7E;&#x540D;&#xFF0C;from &#x8D26;&#x6237;&#x540D;&#xFF0C;to &#x8D26;&#x6237;&#x540D;&#xFF0C;&#x4EA4;&#x6613; id &#x7B49;&#xFF1A;</p>
<pre><code>result {
  &quot;broadcast&quot;: true,
  &quot;transaction&quot;: {
    &quot;compression&quot;: &quot;none&quot;,
    &quot;transaction&quot;: {
      &quot;expiration&quot;: &quot;2018-08-08T06:34:34&quot;,
      &quot;ref_block_num&quot;: 25363,
      &quot;ref_block_prefix&quot;: 2317966385,
      &quot;net_usage_words&quot;: 0,
      &quot;max_cpu_usage_ms&quot;: 0,
      &quot;delay_sec&quot;: 0,
      &quot;context_free_actions&quot;: [],
      &quot;actions&quot;: [
        {
          &quot;account&quot;: &quot;eosio.token&quot;,
          &quot;name&quot;: &quot;transfer&quot;,
          &quot;authorization&quot;: [
            {
              &quot;actor&quot;: &quot;hellomongodb&quot;,
              &quot;permission&quot;: &quot;active&quot;
            }
          ],
          &quot;data&quot;: &quot;701265934a1aa36a0000000000ea3055a08601000000000004464f0000000000087472616e73666572&quot;
        }
      ],
      &quot;transaction_extensions&quot;: []
    },
    &quot;signatures&quot;: [
      &quot;SIG_K1_K9V3rSTcXBjfAdHiCmmrPbjrs5SjR4Qzjb1u12du9qD2pC8pwGfdrpt9p4t8YZxCGNRRrTgaFYV83kwNJnxUc1MtaghjBk&quot;
    ]
  },
  &quot;transaction_id&quot;: &quot;2c35fb9fbaaa1164da7204eb51d8fcc6299408d30a79a3410368c8afa5d8932e&quot;,
</code></pre><p>&#x7ECF;&#x8FC7;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x7684;&#x540C;&#x6B65;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x521A;&#x624D;&#x6253;&#x5370;&#x51FA;&#x7684;&#x4EA4;&#x6613; id &#xFF08;&#x5373; transaction_id &#xFF09;&#x5728; mongo &#x4E2D;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#xFF1A;</p>
<pre><code>&gt; db.transactions.find({&quot;trx_id&quot;:&quot;2c35fb9fbaaa1164da7204eb51d8fcc6299408d30a79a3410368c8afa5d8932e&quot;}).pretty()
{
    &quot;_id&quot; : ObjectId(&quot;5b6a8fa5bc9b45370a38f234&quot;),
    &quot;trx_id&quot; : &quot;2c35fb9fbaaa1164da7204eb51d8fcc6299408d30a79a3410368c8afa5d8932e&quot;,
    &quot;irreversible&quot; : true,
    &quot;transaction_header&quot; : {
        &quot;expiration&quot; : &quot;2018-08-08T06:34:34&quot;,
        &quot;ref_block_num&quot; : 25363,
        &quot;ref_block_prefix&quot; : NumberLong(&quot;2317966385&quot;),
        &quot;max_net_usage_words&quot; : 0,
        &quot;max_cpu_usage_ms&quot; : 0,
        &quot;delay_sec&quot; : 0
    },
    &quot;signing_keys&quot; : {
        &quot;0&quot; : &quot;FO8R5TLhkDNDeV8XNWaSKeu2Q2knV4S2MJMbPcUz9vKfF84yrfdW&quot;
    },
    &quot;actions&quot; : [
        {
            &quot;action_num&quot; : 0,
            &quot;trx_id&quot; : &quot;2c35fb9fbaaa1164da7204eb51d8fcc6299408d30a79a3410368c8afa5d8932e&quot;,
            &quot;cfa&quot; : false,
            &quot;account&quot; : &quot;eosio.token&quot;,
            &quot;name&quot; : &quot;transfer&quot;,
            &quot;authorization&quot; : [
                {
                    &quot;actor&quot; : &quot;hellomongodb&quot;,
                    &quot;permission&quot; : &quot;active&quot;
                }
            ],
            &quot;data&quot; : {
                &quot;from&quot; : &quot;hellomongodb&quot;,
                &quot;to&quot; : &quot;eosio&quot;,
                &quot;quantity&quot; : &quot;10.0000 FO&quot;,
                &quot;memo&quot; : &quot;transfer&quot;
            }
        }
    ],
    &quot;transaction_extensions&quot; : {

    },
    &quot;signatures&quot; : {
        &quot;0&quot; : &quot;SIG_K1_K9V3rSTcXBjfAdHiCmmrPbjrs5SjR4Qzjb1u12du9qD2pC8pwGfdrpt9p4t8YZxCGNRRrTgaFYV83kwNJnxUc1MtaghjBk&quot;
    },
    &quot;context_free_data&quot; : {

    },
    &quot;createdAt&quot; : ISODate(&quot;2018-08-08T06:37:25.887Z&quot;),
    &quot;block_id&quot; : &quot;0000632bec098cee125b2c4f5fe630424b04f1bae9b5ec2bec274697e44a5751&quot;,
    &quot;block_num&quot; : 25387,
    &quot;updatedAt&quot; : ISODate(&quot;2018-08-08T06:37:28.083Z&quot;)
}
</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4EA4;&#x6613;&#x7684;&#x8BE6;&#x7EC6;&#x6570;&#x636E;&#x90FD;&#x5DF2;&#x7ECF;&#x540C;&#x6B65;&#x5230;&#x4E86; mongoDB&#x3002;</p>
<h4 id="&#x5206;&#x9875;&#x52A0;&#x6392;&#x5E8F;&#xFF0C;mongodb-&#x663E;&#x795E;&#x5A01;">&#x5206;&#x9875;&#x52A0;&#x6392;&#x5E8F;&#xFF0C;mongoDB &#x663E;&#x795E;&#x5A01;</h4>
<p>&#x5BF9;&#x5927;&#x591A;&#x6570;&#x4E1A;&#x52A1;&#xFF0C;&#x7FFB;&#x9875;&#x548C;&#x6392;&#x5E8F;&#x662F;&#x57FA;&#x672C;&#x529F;&#x80FD;&#x3002;mongoDB &#x652F;&#x6301;&#x4F7F;&#x7528; sort &#x6392;&#x5E8F;&#xFF0C;limit &#x914D;&#x5408; skip &#x8FDB;&#x884C; &#x5206;&#x9875;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5229;&#x7528;&#x8FD9;&#x4E00;&#x7279;&#x6027;&#xFF0C;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x529F;&#x80FD;&#xFF1A;&#x6309;&#x521B;&#x5EFA;&#x65F6;&#x95F4;&#x5012;&#x5E8F;&#x67E5;&#x8BE2;&#x4EA4;&#x6613;&#x4FE1;&#x606F;&#xFF0C;&#x5E76;&#x4E14;&#x80FD;&#x591F;&#x4EE5;&#x6BCF;&#x9875;10&#x6761;&#x8BB0;&#x5F55;&#x8FDB;&#x884C;&#x5C55;&#x73B0;&#x3002;</p>
<p>&#x8BED;&#x53E5;&#x5341;&#x5206;&#x7B80;&#x5355;&#xFF0C;&#x5728; mongo &#x5BA2;&#x6237;&#x7AEF;&#x4E2D;&#x8F93;&#x5165;&#xFF1A;</p>
<pre><code>db.transactions.find().sort({&quot;createdAt&quot;: -1}).skip(0).limit(5).pretty()
</code></pre><p>&#x5373;&#x53EF;&#x770B;&#x5230;&#x6709;5&#x6761;&#x6309;&#x521B;&#x5EFA;&#x65F6;&#x95F4;&#x5012;&#x5E8F;&#x7684;&#x4EA4;&#x6613;&#x6570;&#x636E;&#x88AB;&#x67E5;&#x51FA;&#xFF0C;&#x4E0B;&#x9762;&#x8FDB;&#x884C;&#x7FFB;&#x9875;&#xFF1A;</p>
<pre><code>db.transactions.find().sort({&quot;createdAt&quot;: -1}).skip(5).limit(5).pretty()
</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E0B;&#x4E00;&#x9875;&#x7684;5&#x6761;&#x6570;&#x636E;&#x3002;&#x5229;&#x7528;&#x8FD9;&#x4E00;&#x7279;&#x6027;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x505A;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x533A;&#x5757;&#x94FE;&#x6D4F;&#x89C8;&#x5668;&#x5566; ~</p>
<p>&#x81F3;&#x6B64;&#xFF0C;&#x4F60;&#x5DF2;&#x7ECF;&#x8FBE;&#x6210;&#x5C06; TestNet &#x7F51;&#x7EDC;&#x7684;&#x6570;&#x636E;&#x540C;&#x6B65;&#x81F3; mongoDB &#x5E76;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#x8FD9;&#x4E00;&#x5C0F;&#x76EE;&#x6807;&#xFF0C;&#x52A0;&#x6CB9;&#xFF0C;&#x4E00;&#x8D77;&#x7EE7;&#x7EED;&#x63A2;&#x7D22; FIBOS &#x5427;~</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="basic-api.html" class="navigation navigation-next navigation-unique" aria-label="Next page: FIBOS.js API 基础篇">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"三行代码，让 FIBOS 支持 mongoDB 富查询","level":"1.6.1","depth":2,"next":{"title":"FIBOS.js API 基础篇","level":"1.6.2","depth":2,"path":"extension/basic-api.md","ref":"extension/basic-api.md","articles":[]},"previous":{"title":"FIBOS 扩展应用","level":"1.6","depth":1,"ref":"","articles":[{"title":"三行代码，让 FIBOS 支持 mongoDB 富查询","level":"1.6.1","depth":2,"path":"extension/mongodb-richquery.md","ref":"extension/mongodb-richquery.md","articles":[]},{"title":"FIBOS.js API 基础篇","level":"1.6.2","depth":2,"path":"extension/basic-api.md","ref":"extension/basic-api.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"FIBOS Fujian<fibosfujian@hotmail.com>","pdf":{"pageBreaksBefore":"/","headerTemplate":null,"paperSize":"a4","margin":{"right":62,"left":62,"top":56,"bottom":56},"fontSize":12,"fontFamily":"Arial","footerTemplate":null,"chapterMark":"pagebreak","pageNumbers":true},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"isbn":"","variables":{},"title":"FIBOS Document","language":"zh","links":{"sharing":{"all":null,"facebook":null,"google":null,"twitter":null,"weibo":null},"sidebar":{"FIBOS":"https://fibos.io"}},"gitbook":"*","description":"This is a document for fibos","extension":null},"file":{"path":"extension/mongodb-richquery.md","mtime":"2018-09-07T03:23:03.623Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-09-07T04:04:12.980Z"},"basePath":"..","book":{"language":"zh"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

